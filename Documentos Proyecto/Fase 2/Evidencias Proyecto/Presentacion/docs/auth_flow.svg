<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="962px" preserveAspectRatio="none" style="width:1751px;height:962px;background:#FFFFFF;" version="1.1" viewBox="0 0 1751 962" width="1751px" zoomAndPan="magnify"><title>Flujo de Autenticaci&#243;n - API Recetas del Mundo</title><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="373.7344" x="690.0532" y="27.9951">Flujo de Autenticaci&#243;n - API Recetas del Mundo</text><rect fill="none" height="170.6875" style="stroke:#000000;stroke-width:1.5;" width="1197.9971" x="546.8438" y="291.7031"/><rect fill="none" height="170.6875" style="stroke:#000000;stroke-width:1.5;" width="1023.3623" x="546.8438" y="550.9531"/><g><title>Usuario</title><rect fill="#000000" fill-opacity="0.00000" height="749.4688" width="8" x="364.0029" y="125.5781"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="368" x2="368" y1="125.5781" y2="875.0469"/></g><g><title>Cliente .UI.</title><rect fill="#000000" fill-opacity="0.00000" height="749.4688" width="8" x="616.1963" y="125.5781"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="619.8438" x2="619.8438" y1="125.5781" y2="875.0469"/></g><g><title>Spring Boot .API REST.</title><rect fill="#000000" fill-opacity="0.00000" height="749.4688" width="8" x="1069.6396" y="125.5781"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="1073.4697" x2="1073.4697" y1="125.5781" y2="875.0469"/></g><g><title>DB .Postgres.</title><rect fill="#000000" fill-opacity="0.00000" height="749.4688" width="8" x="1480.5635" y="125.5781"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="1483.9209" x2="1483.9209" y1="125.5781" y2="875.0469"/></g><g><title>Redis . Session</title><rect fill="#000000" fill-opacity="0.00000" height="749.4688" width="8" x="1648.5234" y="125.5781"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="1652.2061" x2="1652.2061" y1="125.5781" y2="875.0469"/></g><g class="participant participant-head" data-participant="Usuario"><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="76.0059" x="327" y="120.8613">Usuario</text><ellipse cx="368.0029" cy="50.7969" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M368.0029,58.7969 L368.0029,85.7969 M355.0029,66.7969 L381.0029,66.7969 M368.0029,85.7969 L355.0029,100.7969 M368.0029,85.7969 L381.0029,100.7969" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-tail" data-participant="Usuario"><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="76.0059" x="327" y="892.6113">Usuario</text><ellipse cx="368.0029" cy="905.8281" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M368.0029,913.8281 L368.0029,940.8281 M355.0029,921.8281 L381.0029,921.8281 M368.0029,940.8281 L355.0029,955.8281 M368.0029,940.8281 L381.0029,955.8281" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-head" data-participant="Client"><rect fill="#E2E2F0" height="37.2813" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="126.7051" x="556.8438" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="112.7051" x="563.8438" y="112.8613">Cliente (UI)</text></g><g class="participant participant-tail" data-participant="Client"><rect fill="#E2E2F0" height="37.2813" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="126.7051" x="556.8438" y="874.0469"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="112.7051" x="563.8438" y="899.6113">Cliente (UI)</text></g><g class="participant participant-head" data-participant="API"><rect fill="#E2E2F0" height="37.2813" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="242.3398" x="952.4697" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="228.3398" x="959.4697" y="112.8613">Spring Boot (API REST)</text></g><g class="participant participant-tail" data-participant="API"><rect fill="#E2E2F0" height="37.2813" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="242.3398" x="952.4697" y="874.0469"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="228.3398" x="959.4697" y="899.6113">Spring Boot (API REST)</text></g><g class="participant participant-head" data-participant="DB"><rect fill="#E2E2F0" height="37.2813" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="151.2852" x="1408.9209" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="137.2852" x="1415.9209" y="112.8613">DB (Postgres)</text></g><g class="participant participant-tail" data-participant="DB"><rect fill="#E2E2F0" height="37.2813" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="151.2852" x="1408.9209" y="874.0469"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="137.2852" x="1415.9209" y="899.6113">DB (Postgres)</text></g><g class="participant participant-head" data-participant="Redis"><rect fill="#E2E2F0" height="37.2813" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="164.6348" x="1570.2061" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="150.6348" x="1577.2061" y="112.8613">Redis / Session</text></g><g class="participant participant-tail" data-participant="Redis"><rect fill="#E2E2F0" height="37.2813" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="164.6348" x="1570.2061" y="874.0469"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="150.6348" x="1577.2061" y="899.6113">Redis / Session</text></g><g class="message" data-participant-1="Usuario" data-participant-2="Client"><polygon fill="#181818" points="608.1963,160.8594,618.1963,164.8594,608.1963,168.8594,612.1963,164.8594" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="368.0029" x2="614.1963" y1="164.8594" y2="164.8594"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="228.1934" x="375.0029" y="158.1426">Introduce credenciales</text></g><g class="message" data-participant-1="Client" data-participant-2="API"><polygon fill="#181818" points="1061.6396,198.1406,1071.6396,202.1406,1061.6396,206.1406,1065.6396,202.1406" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="620.1963" x2="1067.6396" y1="202.1406" y2="202.1406"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="355.3418" x="627.1963" y="195.4238">POST /auth/login {email,password}</text></g><g class="message" data-participant-1="API" data-participant-2="DB"><polygon fill="#181818" points="1472.5635,235.4219,1482.5635,239.4219,1472.5635,243.4219,1476.5635,239.4219" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="1073.6396" x2="1478.5635" y1="239.4219" y2="239.4219"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="386.9238" x="1080.6396" y="232.7051">Verificar usuario y contrase&#241;a (bcrypt)</text></g><g class="message" data-participant-1="DB" data-participant-2="API"><polygon fill="#181818" points="1084.6396,272.7031,1074.6396,276.7031,1084.6396,280.7031,1080.6396,276.7031" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="1078.6396" x2="1483.5635" y1="276.7031" y2="276.7031"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="209.9805" x="1090.6396" y="269.9863">Usuario v&#225;lido / hash</text></g><path d="M546.8438,291.7031 L621.7559,291.7031 L621.7559,306.9844 L611.7559,316.9844 L546.8438,316.9844 L546.8438,291.7031" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="170.6875" style="stroke:#000000;stroke-width:1.5;" width="1197.9971" x="546.8438" y="291.7031"/><text fill="#000000" font-family="sans-serif" font-size="20" font-weight="bold" lengthAdjust="spacing" textLength="29.9121" x="561.8438" y="311.2676">alt</text><text fill="#000000" font-family="sans-serif" font-size="20" font-weight="bold" lengthAdjust="spacing" textLength="247.1387" x="636.7559" y="312.2676">[credenciales v&#225;lidas]</text><g class="message" data-participant-1="API" data-participant-2="Redis"><polygon fill="#181818" points="1640.5234,350.5469,1650.5234,354.5469,1640.5234,358.5469,1644.5234,354.5469" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="1073.6396" x2="1646.5234" y1="354.5469" y2="354.5469"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="307.207" x="1080.6396" y="347.8301">Crear sesi&#243;n / token (opcional)</text></g><g class="message" data-participant-1="API" data-participant-2="Client"><polygon fill="#181818" points="631.1963,387.8281,621.1963,391.8281,631.1963,395.8281,627.1963,391.8281" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="625.1963" x2="1072.6396" y1="391.8281" y2="391.8281"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="305.5078" x="637.1963" y="385.1113">200 OK + JWT / session cookie</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="546.8438" x2="1744.8408" y1="400.8281" y2="400.8281"/><text fill="#000000" font-family="sans-serif" font-size="20" font-weight="bold" lengthAdjust="spacing" textLength="268.2324" x="551.8438" y="419.3926">[credenciales inv&#225;lidas]</text><g class="message" data-participant-1="API" data-participant-2="Client"><polygon fill="#181818" points="631.1963,450.3906,621.1963,454.3906,631.1963,458.3906,627.1963,454.3906" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="625.1963" x2="1072.6396" y1="454.3906" y2="454.3906"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="178.8086" x="637.1963" y="447.6738">401 Unauthorized</text></g><g class="message" data-participant-1="Client" data-participant-2="API"><polygon fill="#181818" points="1061.6396,494.6719,1071.6396,498.6719,1061.6396,502.6719,1065.6396,498.6719" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="620.1963" x2="1067.6396" y1="498.6719" y2="498.6719"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="429.4434" x="627.1963" y="491.9551">Acceso a recurso protegido (Authorization)</text></g><g class="message" data-participant-1="API" data-participant-2="Redis"><polygon fill="#181818" points="1640.5234,531.9531,1650.5234,535.9531,1640.5234,539.9531,1644.5234,535.9531" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="1073.6396" x2="1646.5234" y1="535.9531" y2="535.9531"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="216.2891" x="1080.6396" y="529.2363">Validar sesi&#243;n / token</text></g><path d="M546.8438,550.9531 L621.7559,550.9531 L621.7559,566.2344 L611.7559,576.2344 L546.8438,576.2344 L546.8438,550.9531" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="170.6875" style="stroke:#000000;stroke-width:1.5;" width="1023.3623" x="546.8438" y="550.9531"/><text fill="#000000" font-family="sans-serif" font-size="20" font-weight="bold" lengthAdjust="spacing" textLength="29.9121" x="561.8438" y="570.5176">alt</text><text fill="#000000" font-family="sans-serif" font-size="20" font-weight="bold" lengthAdjust="spacing" textLength="157.9492" x="636.7559" y="571.5176">[token v&#225;lido]</text><g class="message" data-participant-1="API" data-participant-2="DB"><polygon fill="#181818" points="1472.5635,609.7969,1482.5635,613.7969,1472.5635,617.7969,1476.5635,613.7969" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="1073.6396" x2="1478.5635" y1="613.7969" y2="613.7969"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="272.9785" x="1080.6396" y="607.0801">Obtener usuario / permisos</text></g><g class="message" data-participant-1="API" data-participant-2="Client"><polygon fill="#181818" points="631.1963,647.0781,621.1963,651.0781,631.1963,655.0781,627.1963,651.0781" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="625.1963" x2="1072.6396" y1="651.0781" y2="651.0781"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="132.7051" x="637.1963" y="644.3613">200 / recurso</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="546.8438" x2="1570.2061" y1="660.0781" y2="660.0781"/><text fill="#000000" font-family="sans-serif" font-size="20" font-weight="bold" lengthAdjust="spacing" textLength="107.6758" x="551.8438" y="678.6426">[inv&#225;lido]</text><g class="message" data-participant-1="API" data-participant-2="Client"><polygon fill="#181818" points="631.1963,709.6406,621.1963,713.6406,631.1963,717.6406,627.1963,713.6406" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="625.1963" x2="1072.6396" y1="713.6406" y2="713.6406"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="95.8008" x="637.1963" y="706.9238">401 / 403</text></g><path d="M5,733.6406 L5,859.6406 L1236,859.6406 L1236,743.6406 L1226,733.6406 L5,733.6406" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1226,733.6406 L1226,743.6406 L1236,743.6406 L1226,733.6406" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="327.0117" x="11" y="757.2051">Recomendaciones de seguridad:</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="413.1738" x="11" y="780.4863">- Uso JWT con expiraci&#243;n y refresh token.</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="480.166" x="11" y="803.7676">- Proteger endpoints cr&#237;ticos con roles (`perfil`).</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="1210.8887" x="11" y="827.0488">- JWT: actualmente HS256 (HMAC) en el proyecto. Almacenar `JWT_SECRET` en un vault o variables de entorno seguras.</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="663.6914" x="11" y="850.3301">- Implementar revocaci&#243;n/blacklist para refresh tokens (ej. Redis).</text><!--SRC=[TLJDRXCn4BxxAKQSDe9qG_avv82KfgqQKDMesvOZSRoJn8tNixAzXO1u61w00-8HycACrnlQjEebsdW-ptpVDpCEEXY4KzFS4fG8eoQW3Lf9fRT_BVHXD9t09IeCqdFSm7bZIn9-hMqjdQpuR24R4qx9Xa9_HpWS2Aa2ERZsZNIQ1CCudwwb3V1YR3IdHyYk9xqNm2dJmJweg9ssIpWY2f2rzK-AgmJdV_lOuoF8fkJ3qg5FaEEZVSGbbjf33WLwhycscFPCY8uYz3zqF6084niSbOr2K0vBj4fBWrvqSKP6GaEONXHNaCich793IstX1rPIcrUrzFuhkVAdY3Y6Cy4XtA3J2pRLGTELt81YnvpqkFqZ8Pihjwb3Jp2w_x_6ZjxTzfVH9R66bVGh8KtOuzR5fHS0NT6aUGXZXrpJes-RcKEWDLh8g5RiX3IztOs71XmE1d3n2Lx2ny-iC5wEjZ5TMciKQFo-Cw3ju_eFixqTl8Ph6tqYn-DH2hIbUEBcI2dq118SgiRnL-qeu3AApaRTNHcOHayyKdWZO-ad6bkJajhElNjpsevSp7dEyRuVETJeAkt9F-T9lYENFDZ9fkTKv_px9icrB0ReZijrumvnfQZYe8oTmBXQB67PE1PJ3ZdUv-vJsmAU4y1ljNRTIcwOnuAdVPNq7RJWQUiN5-2KDMaRF3Tf-vktW7oRmL7iLJPZbGjjPhrqZVCFWTUraQPgz_AiE7pt7hApyz6unxc05vvRiK7Uw0COcKegjEpsZ2z-AKx6boTNimXhsERu2W0FAzifvoP9ufpaB2LfqgUYawes6Cjn8eTtrBqr-Tn8jJRQ1uWloxvAfewt1wdhp9rLGZHL_0C0]--></g></svg>