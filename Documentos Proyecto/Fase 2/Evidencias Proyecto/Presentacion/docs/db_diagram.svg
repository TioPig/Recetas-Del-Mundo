<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" width="1600" height="1200" viewBox="0 0 1600 1200" aria-labelledby="title desc">
  <title id="title">Diagrama de tablas - Recetas</title>
  <desc id="desc">Diagrama simplificado del esquema de base de datos, mostrando tablas principales y relaciones (PK/FK).</desc>
  <style>
    .bg { fill:#f8fafb }
    .table { fill:#ffffff; stroke:#0b5f73; stroke-width:2px; rx:8; }
    .thead { fill:#0b5f73; font: bold 13px/18px sans-serif; fill:#ffffff }
    .tname { font: bold 14px sans-serif; fill:#0b5f73 }
    .col { font: 12px monospace; fill:#0b2733 }
    .pk { font-weight:700; fill:#0b2733 }
    .fk { fill:#6b6b6b }
  /* FK lines: más visibles, color principal con transparencia y extremos redondeados */
  .fkline { stroke:#0b5f73; stroke-width:3; stroke-opacity:0.90; stroke-linecap:round; stroke-linejoin:round; marker-end: url(#arrow); fill:none }
  .fk-label { font:11px sans-serif; fill:#0b5f73; font-weight:600 }
  .fk-point { fill:#0b5f73; fill-opacity:0.95 }
    .note { font:12px sans-serif; fill:#0b2733 }
    .separator { stroke:#e6f3f4; stroke-width:1 }
    .box-shadow { filter:url(#shadow) }
  </style>

  <defs>
    <marker id="arrow" viewBox="0 0 12 12" refX="11" refY="6" markerWidth="10" markerHeight="10" orient="auto">
      <path d="M 0 0 L 12 6 L 0 12 z" fill="#0b5f73" fill-opacity="0.75" />
    </marker>
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="0" dy="4" stdDeviation="6" flood-color="#000" flood-opacity="0.08"/>
    </filter>
  </defs>

  <rect class="bg" x="0" y="0" width="1600" height="1200" />

  <!-- Row 1 -->
  <!-- perfil -->
  <g transform="translate(40,40)" class="box-shadow">
    <rect class="table" x="0" y="0" width="260" height="100" rx="8"/>
    <rect x="0" y="0" width="260" height="30" fill="#0b5f73" rx="8"/>
    <text class="tname" x="12" y="20">perfil</text>
    <line class="separator" x1="10" y1="36" x2="250" y2="36" />
    <text class="pk col" x="12" y="56">PK id_perfil</text>
    <text class="col" x="12" y="76">nombre</text>
  </g>

  <!-- usuario -->
  <g transform="translate(340,40)" class="box-shadow">
    <rect class="table" x="0" y="0" width="360" height="140" rx="8"/>
    <rect x="0" y="0" width="360" height="30" fill="#0b5f73" rx="8"/>
    <text class="tname" x="12" y="20">usuario</text>
    <line class="separator" x1="10" y1="36" x2="350" y2="36" />
    <text class="pk col" x="12" y="56">PK id_usr</text>
    <text class="col" x="12" y="76">nombre</text>
    <text class="col" x="12" y="96">apellido</text>
    <text class="col" x="12" y="116">email</text>
    <text class="fk col" x="180" y="56">FK id_perfil → perfil.id_perfil</text>
    <text class="col" x="12" y="136">fecha_creacion</text>
  </g>

  <!-- categoria -->
  <g transform="translate(740,40)" class="box-shadow">
    <rect class="table" x="0" y="0" width="260" height="100" rx="8"/>
    <rect x="0" y="0" width="260" height="30" fill="#0b5f73" rx="8"/>
    <text class="tname" x="12" y="20">categoria</text>
    <line class="separator" x1="10" y1="36" x2="250" y2="36" />
    <text class="pk col" x="12" y="56">PK id_cat</text>
    <text class="col" x="12" y="76">nombre</text>
    <text class="fk col" x="12" y="96">FK id_usr → usuario.id_usr</text>
  </g>

  <!-- pais -->
  <g transform="translate(1040,40)" class="box-shadow">
    <rect class="table" x="0" y="0" width="260" height="100" rx="8"/>
    <rect x="0" y="0" width="260" height="30" fill="#0b5f73" rx="8"/>
    <text class="tname" x="12" y="20">pais</text>
    <line class="separator" x1="10" y1="36" x2="250" y2="36" />
    <text class="pk col" x="12" y="56">PK id_pais</text>
    <text class="col" x="12" y="76">nombre</text>
    <text class="fk col" x="12" y="96">FK id_usr → usuario.id_usr</text>
  </g>

  <!-- Row 2 -->
  <!-- receta -->
  <g transform="translate(40,220)" class="box-shadow">
    <rect class="table" x="0" y="0" width="560" height="200" rx="8"/>
    <rect x="0" y="0" width="560" height="34" fill="#0b5f73" rx="8"/>
    <text class="tname" x="12" y="22">receta</text>
    <line class="separator" x1="10" y1="40" x2="550" y2="40" />
    <text class="pk col" x="12" y="66">PK id_receta</text>
    <text class="col" x="12" y="86">nombre</text>
    <text class="col" x="12" y="106">url_imagen</text>
    <text class="col" x="12" y="126">preparacion</text>
    <text class="col" x="12" y="146">ingredientes (texto)</text>
    <text class="fk col" x="300" y="66">FK id_cat → categoria.id_cat</text>
    <text class="fk col" x="300" y="86">FK id_pais → pais.id_pais</text>
    <text class="fk col" x="300" y="106">FK id_usr → usuario.id_usr</text>
    <text class="col" x="12" y="166">visitas, estado, fecha_creacion</text>
  </g>

  <!-- receta_del_dia -->
  <g transform="translate(620,220)" class="box-shadow">
    <rect class="table" x="0" y="0" width="320" height="100" rx="8"/>
    <rect x="0" y="0" width="320" height="30" fill="#0b5f73" rx="8"/>
    <text class="tname" x="12" y="20">receta_del_dia</text>
    <line class="separator" x1="10" y1="36" x2="310" y2="36" />
    <text class="pk col" x="12" y="56">PK fecha</text>
    <text class="fk col" x="12" y="76">FK id_receta → receta.id_receta</text>
  </g>

  <!-- Row 3 -->
  <!-- ingrediente -->
  <g transform="translate(40,460)" class="box-shadow">
    <rect class="table" x="0" y="0" width="340" height="100" rx="8"/>
    <rect x="0" y="0" width="340" height="30" fill="#0b5f73" rx="8"/>
    <text class="tname" x="12" y="20">ingrediente</text>
    <line class="separator" x1="10" y1="36" x2="330" y2="36" />
    <text class="pk col" x="12" y="60">PK id_ingrediente</text>
    <text class="col" x="12" y="80">nombre</text>
    <text class="fk col" x="12" y="100">FK id_receta → receta.id_receta</text>
  </g>

  <!-- comentario -->
  <g transform="translate(420,460)" class="box-shadow">
    <rect class="table" x="0" y="0" width="360" height="140" rx="8"/>
    <rect x="0" y="0" width="360" height="30" fill="#0b5f73" rx="8"/>
    <text class="tname" x="12" y="20">comentario</text>
    <line class="separator" x1="10" y1="36" x2="350" y2="36" />
    <text class="pk col" x="12" y="60">PK id_comentario</text>
    <text class="col" x="12" y="80">texto</text>
    <text class="fk col" x="12" y="100">FK id_receta → receta.id_receta</text>
    <text class="fk col" x="12" y="120">FK id_usr → usuario.id_usr</text>
  </g>

  <!-- Row 4: reacciones -->
  <g transform="translate(800,400)" class="box-shadow">
    <rect class="table" x="0" y="0" width="680" height="220" rx="8"/>
    <rect x="0" y="0" width="680" height="34" fill="#0b5f73" rx="8"/>
    <text class="tname" x="12" y="22">me_gusta · favorito · estrella</text>
    <line class="separator" x1="10" y1="40" x2="670" y2="40" />
    <text class="col" x="12" y="70">me_gusta: PK id_megusta, fecha_creacion, FK id_receta, FK id_usr</text>
    <text class="col" x="12" y="94">favorito: PK id_fav, fecha_creacion, FK id_receta, FK id_usr</text>
    <text class="col" x="12" y="118">estrella: PK id_estrella, valor, fecha_creacion, FK id_receta, FK id_usr</text>
  </g>

  <!-- Row 5: donacion y sesion_pago -->
  <g transform="translate(40,620)" class="box-shadow">
    <rect class="table" x="0" y="0" width="500" height="120" rx="8"/>
    <rect x="0" y="0" width="500" height="30" fill="#0b5f73" rx="8"/>
    <text class="tname" x="12" y="20">donacion</text>
    <line class="separator" x1="10" y1="36" x2="490" y2="36" />
    <text class="pk col" x="12" y="60">PK id_donacion</text>
    <text class="col" x="12" y="82">amount, currency, status</text>
    <text class="fk col" x="12" y="104">FK id_receta → receta.id_receta · FK id_usr → usuario.id_usr</text>
  </g>

  <g transform="translate(560,620)" class="box-shadow">
    <rect class="table" x="0" y="0" width="360" height="100" rx="8"/>
    <rect x="0" y="0" width="360" height="30" fill="#0b5f73" rx="8"/>
    <text class="tname" x="12" y="20">sesion_pago</text>
    <line class="separator" x1="10" y1="36" x2="350" y2="36" />
    <text class="pk col" x="12" y="60">PK id_sesion</text>
    <text class="col" x="12" y="82">session_id, provider, status</text>
    <text class="fk col" x="12" y="102">FK id_donacion → donacion.id_donacion</text>
  </g>

  <!-- FK connector lines (cleaner placement) -->
  <!-- FK curves with anchor points and labels -->
  <path class="fkline" d="M300 70 C 300 50, 260 50, 260 70" />
  <circle class="fk-point" cx="260" cy="70" r="5" />
  <text class="fk-label" x="280" y="58">usuario.id_perfil → perfil.id_perfil</text>

  <path class="fkline" d="M930 80 C 820 40, 760 40, 700 80" />
  <circle class="fk-point" cx="700" cy="80" r="5" />
  <text class="fk-label" x="780" y="56">categoria.id_usr → usuario.id_usr</text>

  <path class="fkline" d="M1230 80 C 1050 20, 820 40, 700 120" />
  <circle class="fk-point" cx="700" cy="120" r="5" />
  <text class="fk-label" x="960" y="80">pais.id_usr → usuario.id_usr</text>

  <path class="fkline" d="M420 260 C 540 200, 660 160, 760 120" />
  <circle class="fk-point" cx="760" cy="120" r="5" />
  <text class="fk-label" x="600" y="200">receta.id_cat → categoria.id_cat</text>

  <path class="fkline" d="M420 300 C 560 240, 740 160, 880 100" />
  <circle class="fk-point" cx="880" cy="100" r="5" />
  <text class="fk-label" x="640" y="200">receta.id_usr → usuario.id_usr</text>

  <path class="fkline" d="M200 520 C 280 480, 360 440, 460 380" />
  <circle class="fk-point" cx="460" cy="380" r="5" />
  <text class="fk-label" x="320" y="460">ingrediente.id_receta → receta.id_receta</text>

  <path class="fkline" d="M420 520 C 480 460, 540 420, 620 380" />
  <circle class="fk-point" cx="620" cy="380" r="5" />
  <text class="fk-label" x="520" y="460">comentario.id_receta → receta.id_receta</text>

  <path class="fkline" d="M920 520 C 840 480, 780 450, 720 420" />
  <circle class="fk-point" cx="720" cy="420" r="5" />
  <text class="fk-label" x="820" y="480">reacciones.id_receta → receta.id_receta</text>

  <path class="fkline" d="M300 700 C 340 620, 380 560, 420 500" />
  <circle class="fk-point" cx="420" cy="500" r="5" />
  <text class="fk-label" x="360" y="620">donacion.id_receta → receta.id_receta</text>

  <path class="fkline" d="M680 740 C 660 720, 640 700, 620 680" />
  <circle class="fk-point" cx="620" cy="680" r="5" />
  <text class="fk-label" x="660" y="720">sesion_pago.id_donacion → donacion.id_donacion</text>

  <text class="note" x="40" y="760">Diagrama generado automáticamente (resumen). Para exportación formal use: dbdiagram.io, pgModeler o Graphviz.</text>
  <text class="note" x="40" y="780">Leyenda: PK = clave primaria, FK = clave foránea (referencia).</text>

</svg>
